# Алгоритм действий для определения, является ли строка палиндромом:
#   Привести строку к нижнему регистру.
#   Удалить из строки все символы, кроме букв и цифр.
#   Проверить, равна ли строка сама себе, прочитанной в обратном порядке.
#   Если равна, вернуть True (строка является палиндромом), иначе вернуть False.


import re


def is_palindrome(s):
    # Приводим строку к нижнему регистру
    s = s.lower()

    # Удаляем все символы, кроме букв и цифр (английские и русские буквы, цифры)
    s = re.sub(r'[^a-zа-яё0-9]', '', s)

    # Проверяем, является ли строка палиндромом
    return s == s[::-1]


# Примеры использования функции
print(is_palindrome("A man, a plan, a canal, Panama"))  # True
print(is_palindrome("race a car"))  # False
print(is_palindrome(" "))  # True
print(is_palindrome("А роза упала на лапу Азора"))  # True
print(is_palindrome("Это не палиндром"))  # False
